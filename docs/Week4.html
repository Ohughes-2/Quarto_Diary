<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Policy Applications – Learning Diary</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Week3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-364982630eef5352dd1537128a8ed5cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Week4.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy Applications</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Learning Diary</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Owen Hughes:</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to R.S.</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to Quarto and Xaringan</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corrections and Enhancements</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy Applications</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#loudoun-county-virginia-usa" id="toc-loudoun-county-virginia-usa" class="nav-link active" data-scroll-target="#loudoun-county-virginia-usa"><span class="header-section-number">4.1</span> Loudoun County, Virginia, USA</a>
  <ul class="collapse">
  <li><a href="#solar-energy-planning-goals" id="toc-solar-energy-planning-goals" class="nav-link" data-scroll-target="#solar-energy-planning-goals"><span class="header-section-number">4.1.1</span> Solar Energy Planning Goals:</a></li>
  <li><a href="#quick-background" id="toc-quick-background" class="nav-link" data-scroll-target="#quick-background"><span class="header-section-number">4.1.2</span> Quick Background</a></li>
  <li><a href="#loudoun-county-solar-energy-planning" id="toc-loudoun-county-solar-energy-planning" class="nav-link" data-scroll-target="#loudoun-county-solar-energy-planning"><span class="header-section-number">4.1.3</span> Loudoun County Solar Energy Planning:</a></li>
  <li><a href="#northern-virginia-solar-energy-planning" id="toc-northern-virginia-solar-energy-planning" class="nav-link" data-scroll-target="#northern-virginia-solar-energy-planning"><span class="header-section-number">4.1.4</span> Northern Virginia Solar Energy Planning:</a></li>
  </ul></li>
  <li><a href="#potential-data" id="toc-potential-data" class="nav-link" data-scroll-target="#potential-data"><span class="header-section-number">4.2</span> Potential Data</a>
  <ul class="collapse">
  <li><a href="#dynamic-potential" id="toc-dynamic-potential" class="nav-link" data-scroll-target="#dynamic-potential"><span class="header-section-number">4.2.1</span> Dynamic Potential:</a></li>
  </ul></li>
  <li><a href="#take-aways" id="toc-take-aways" class="nav-link" data-scroll-target="#take-aways"><span class="header-section-number">4.3</span> Take Aways</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">4.4</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy Applications</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="loudoun-county-virginia-usa" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="loudoun-county-virginia-usa"><span class="header-section-number">4.1</span> Loudoun County, Virginia, USA</h2>
<section id="solar-energy-planning-goals" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="solar-energy-planning-goals"><span class="header-section-number">4.1.1</span> Solar Energy Planning Goals:</h3>
<p>How Can EO data be used to inform on and suggest strategies to increase solar energy use in industrial regions of the county?</p>
</section>
<section id="quick-background" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="quick-background"><span class="header-section-number">4.1.2</span> Quick Background</h3>
<p>Loudoun county is the fourth most populous first level locality (city or county) in the State of Virginia with a population of around 440,000 as estimated in 2024 by the <a href="https://www.coopercenter.org/virginia-population-estimates">University of Virginia Cooper Center for Public Service</a>. It makes up part of the hearth of Northern Virginia or NoVA which as a whole forms the south western suburbs of Washington D.C. <span class="citation" data-cites="noauthor_virginia_nodate">(<a href="#ref-noauthor_virginia_nodate" role="doc-biblioref"><span>“Virginia <span>Population</span> <span>Estimates</span> <span></span> <span>Cooper</span> <span>Center</span>”</span> n.d.</a>)</span></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/nova_map.png" class="img-fluid figure-img"></p>
<figcaption>Northern Virginia, USA, Made with Python Matplotlib</figcaption>
</figure>
</div>
</section>
<section id="loudoun-county-solar-energy-planning" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="loudoun-county-solar-energy-planning"><span class="header-section-number">4.1.3</span> Loudoun County Solar Energy Planning:</h3>
<p>Loudoun county contains “the largest concentration of data centers in the world.” This has strained the local power grid as electricity usage “largely due to data centers” has limited Loudoun’s sustainability as the industry forces increased use of fossil fuels for power <span class="citation" data-cites="noauthor_energy_nodate">(<a href="#ref-noauthor_energy_nodate" role="doc-biblioref"><span>“Energy <span>Management</span> <span></span> <span>Loudoun</span> <span>County</span>, <span>VA</span> - <span>Official</span> <span>Website</span>”</span> n.d., 7, 45</a>)</span>. Combining the immense energy usage of data centers with residential rooftop solar production goals in Loudoun, noted on page 19 of <a href="https://www.loudoun.gov/DocumentCenter/View/174600/Loudoun-County-Energy-Strategy-Final-Report---2023">Loudoun County’s 2023 Energy Strategy</a>, could see large industrial buildings form solar farms that would contribute green sourced energy to the local electric grid and decrease reliance on fossil fuels to power the ever demanding data center industry.</p>
</section>
<section id="northern-virginia-solar-energy-planning" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="northern-virginia-solar-energy-planning"><span class="header-section-number">4.1.4</span> Northern Virginia Solar Energy Planning:</h3>
<p>As seen in chapter 1 of this diary, the Virginia side of the Washington D.C metro area has already established increasing solar energy as goal for the wider region, and EO has been used to so. The <a href="https://www.novasolarmap.com/">Northern Virginia Solar Map</a> estimates potential solar energy production for each building within the data set (<span class="citation" data-cites="noauthor_home_nodate"><span>“<span>HOME</span> <span></span> Novasolarmap”</span> (<a href="#ref-noauthor_home_nodate" role="doc-biblioref">n.d.</a>)</span>). However, the current map uses data from 2015 and a recent attempt (that I formed part of) to update the map with 2023 data was cancelled because of federal funding cuts. This means that the current NoVA solar map <strong>cannot</strong> accurately serve as a tool for solar potential estimation or policy support for any building constructed or modified after winter 2015. This further supports other forms of Earth observation to be used for solar potential for Loudoun County’s industrial areas.</p>
</section>
</section>
<section id="potential-data" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="potential-data"><span class="header-section-number">4.2</span> Potential Data</h2>
<p>Unlike the NoVA Solar Map which used privately collected LiDAR data and ArcGIS tools as its primary method of solar potential calculation, this policy looks to open source data collected by Loudoun County as well as R-studio or Python for calculation. This would allow for all steps to be repeated by any locality in the world assuming they had equivalent data. With that, much of the analysis required for assessing solar potential come from a 2015 paper by Horvath et al.&nbsp;in which aerial imagery is used to assess the area of a building, roof shape, and potential obstructions in order to create a usable area coefficient for already known solar potential calculations. <span class="citation" data-cites="horvath_solar_2016">(<a href="#ref-horvath_solar_2016" role="doc-biblioref">Horváth, Kassai-Szoó, and Csoknyai 2016</a>)</span></p>
<p>Using the same principle with Loudoun County data and avoiding expensive high resolution LiDAR, a typology for data centers in Loudoun can be created. This would benefit from most data centers following a similar architectural design. Additionally and most importantly, the “Loudoun Imagery 2025” data from the <a href="https://geohub-loudoungis.opendata.arcgis.com/search?q=imagery&amp;sort=Title%7Ctitle%7Casc">Loudoun County GeoHub</a> provides 1 foot (0.3048 meters) resolution which would allow the base typology to assess roof angle and building height while variables like shadow blockage, roof installments (e.g HVAC units), and building area to vary in the usable area coefficient of the solar potential formula.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Images/data_centers.png" class="img-fluid figure-img"></p>
<figcaption>Data Center Complex, Ashburn, Loudoun County, VA</figcaption>
</figure>
</div>
<section id="dynamic-potential" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="dynamic-potential"><span class="header-section-number">4.2.1</span> Dynamic Potential:</h3>
<p>As previously mentioned regarding the NoVA solar map, one of the downsides of high resolution LiDAR is that the projects it serves can often have a short life span for informing policy. Altought he Solar Map still provides useful predictions for a majority of the residents and businesses of Northern Virginia, updating the map is expensive and labor intensive. Creating solar estimates without high resolution LiDAR creates a path for repeatable and temporally dynamic estimates. Because Loudoun’s 1ft resolution imagery is updated once per year, a dynamic threshold for solar energy production of all data centers (and other large industrial buildings) could be changed as Loudoun continues to pursue integration of the data center industry.</p>
</section>
</section>
<section id="take-aways" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="take-aways"><span class="header-section-number">4.3</span> Take Aways</h2>
<p>Given my experience as both a recent former resident of Northern Virginia and a member of the team attempting to update the NoVA solar map, I am already familiar with the numerous statewide and NoVA regional incentives to introduce solar energy more into individual buildings and the wider power grid. However, my understanding of data centers, particularly in Loudoun County, was tailored by typically disgruntled Loudoun residents and politicians expressing their disgust with the rapid growth of the industry since around 2010. This combined with the growth of the data center industry in other parts of Virginia, most notably the Richmond area around 160 km south, led me to assume that Loudoun had nearly capped it’s introduction of data centers. However, the <a href="https://www.loudoun.gov/DocumentCenter/View/174600/Loudoun-County-Energy-Strategy-Final-Report---2023">Loudoun County’s 2023 Energy Strategy</a> confirms the exact opposite, and reiterates the need for supplementation to the power grid. Specifically, in 2022, Loudoun estimated that by 2030 there would be a 12 million square foot (roughly 1.1 million square meter) increase in data center floor space. Additionally the Energy Strategy mentions “no specific strategies to reduce energy consumption of data centers” which further supports the idea of combining the already existing plans for increasing residential solar energy with the continued growth of data centers. <span class="citation" data-cites="noauthor_energy_nodate">(<a href="#ref-noauthor_energy_nodate" role="doc-biblioref"><span>“Energy <span>Management</span> <span></span> <span>Loudoun</span> <span>County</span>, <span>VA</span> - <span>Official</span> <span>Website</span>”</span> n.d., 15, 40</a>)</span></p>
<p>Lastly, my perception of how solar energy is calculates using Earth Observation data was obscured by the use of ArcGIS in the NoVA Solar Map. In that project, all I knew is that LiDAR was used to create a DEM and then the ESRI solar estimation tool would spit out a layer of solar estimation. I now understand, after reading the Horvath et al.&nbsp;paper, that as long a the usable area is attained a standard formula can be applied. This is why I decided to focus on open source high spatial resolution as the formula could be applied to any data center complex with adequate imagery.</p>
</section>
<section id="references" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="references"><span class="header-section-number">4.4</span> References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-noauthor_energy_nodate" class="csl-entry" role="listitem">
<span>“Energy <span>Management</span> <span></span> <span>Loudoun</span> <span>County</span>, <span>VA</span> - <span>Official</span> <span>Website</span>.”</span> n.d. Accessed February 15, 2026. <a href="https://www.loudoun.gov/energy">https://www.loudoun.gov/energy</a>.
</div>
<div id="ref-noauthor_home_nodate" class="csl-entry" role="listitem">
<span>“<span>HOME</span> <span></span> Novasolarmap.”</span> n.d. Accessed January 23, 2026. <a href="https://www.novasolarmap.com/">https://www.novasolarmap.com/</a>.
</div>
<div id="ref-horvath_solar_2016" class="csl-entry" role="listitem">
Horváth, Miklós, Dominika Kassai-Szoó, and Tamás Csoknyai. 2016. <span>“Solar Energy Potential of Roofs on Urban Level Based on Building Typology.”</span> <em>Energy and Buildings</em> 111 (January): 278–89. <a href="https://doi.org/10.1016/j.enbuild.2015.11.031">https://doi.org/10.1016/j.enbuild.2015.11.031</a>.
</div>
<div id="ref-noauthor_virginia_nodate" class="csl-entry" role="listitem">
<span>“Virginia <span>Population</span> <span>Estimates</span> <span></span> <span>Cooper</span> <span>Center</span>.”</span> n.d. Accessed February 15, 2026. <a href="https://www.coopercenter.org/virginia-population-estimates">https://www.coopercenter.org/virginia-population-estimates</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Week3.html" class="pagination-link" aria-label="Corrections and Enhancements">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corrections and Enhancements</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>